# tar等命令的基本使用

首先要弄清两个概念,打包和压缩.打包是指将一大堆文件和目录变成一个总的文件;压缩则是将一个大的文件通过一些压缩算法变成一个小文件.  
一把而言,后缀为tar的文件都是打包过的文件,未经过压缩,后缀为gz或者gz2的文件才是被压缩过的,但是一般由于压缩之前都要打包,所以常见都是tar.gz类似这样的文件后缀.

## tar命令语法

`tar(选项)(参数)`

## 常用选项

- -C 用于解压缩的时候指定输出的目录
- -v 显示操作过程
- -j 支持bzip2解压文件
- -z 通过gzip指令处理备份的文件
- -Z 通过compress指令处理备份的文件
- -r 添加文件到已经压缩的文件
- -u 添加改变了和现有的文件到已经存在的压缩文件中
- -f 指定备份文件
- -k 保留原有文件不覆盖
- -m 保留文件不被覆盖
- -w 确认压缩文件的正确性
- -t 列出备份文件的内容
- -x 从备份文件中还原文件
- -p 用原来的文件权限还原文件

## 参数

文件或者目录:指定要打包的文件或者目录

## 实例

### 将文件全部打包

`tar -cvf 2020log.tar 2020.log` 将`2020.log`文件打包为`2020log.tar`,不压缩  
`tar -zcvf 2020log.tar.gz 2020.log` 将`2020.log`文件打包并以gzip压缩为`2020log.tar.gz`  
`tar -jcvf 2020log.tar.bz2 2020.log` 将`2020.log`文件并以bzip2压缩为`2020log.tar.bz2`  
实际上打包完成的文件名称是任意的,习惯上我们用tar来标识打包过的文件,以gz标识gzip压缩过的文件,以bz2来标识bzip2压缩过的文件

### 查看压缩包中的文件

`tar -ztvf 2020log.tar.gz` 查看2020log.tar.gz中包含的文件

### 解压缩

`tar -xzvf 2020log.tar.gz -C ./` 将`2020log.tar.gz`文件解压缩到当前目录下

### 总结一下

压缩要用c参数,解压用x参数,gz有关操作要加z,bz2有关操作要加j

## zip命令

zip命令也可以用来压缩文件,或者对文件进行打包操作.用法与tar类似,这里简单介绍一下常用的方式就好了

### 常用的选项

- -D 压缩文件内不建立目录名称
- -d 从压缩文内删除指定的文件
- -F 尝试修复已经损坏的的压缩文件
- -q 不显示指令执行过程
- -u 更换较新的文件的到压缩文件内
- -v 显示指令执行过程或者版本信息

### 实例操作

`zip -q -r log.zip /var/www/log` 将`/var/www/log`目录下的所有文件和文件夹打包为当前目录下的log.zip

## unzip命令

unzip命令用于解压缩有zip命令压缩的文件

### 经常用的选项

- -l 显示压缩文件中所包含的文件
- -n 解压缩时不要覆盖原有的文件
- -o 不必先询问用户,unzip执行后覆盖原有的文件
- -q 执行时不显示任何信息
- -d 指定解压缩后的输出目录

### 常用实例操作

`unzip log.zip -d ./` 将log.zip解压到当前目录下  
`unzip -n log.zip -d ./` 将log.zip解压到当前目录下,如果当前目录下已有相同的文件存在,则不覆盖已有的文件
